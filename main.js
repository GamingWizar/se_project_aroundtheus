!function(){"use strict";class e{constructor(e,t,s){this._text=e.text,this._image=e.image,this._cardSelector=t,this._handleImageClick=s}_getCardTemplate(){return document.querySelector(`#${this._cardSelector}`).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._elementImage=this._element.querySelector(".card__image"),this._elementImage.addEventListener("click",(()=>{this._handleImageClick(this._text,this._image)})),this._likeButtonHandler(),this._deleteButtonHandler()}_likeButtonHandler(){this._cardHeart=this._element.querySelector(".card__heart"),this._cardHeart.addEventListener("click",(()=>{this._cardHeart.classList.toggle("card__heart_liked")}))}_deleteButtonHandler(){this._cardDelete=this._element.querySelector(".card__delete"),this._cardDelete.addEventListener("click",(()=>{this._element.remove()}))}generateCard(){return this._element=this._getCardTemplate(),this._setEventListeners(),this._element.querySelector(".card__text").textContent=this._text,this._elementImage.src=this._image,this._elementImage.alt=this._text,this._element}}class t{constructor(e,t){this._settings=e,this._form=t}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this._submitButton.classList.add(this._settings.inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.disabled=!1)}_showInputError(e){this._errorElement=this._form.querySelector(`#${e.id}-error`),this._errorElement.textContent=e.validationMessage,this._errorElement.classList.add(this._settings.errorClass),e.classList.add(this._settings.inputErrorClass)}_hideInputError(e){this._errorElement=this._form.querySelector(`#${e.id}-error`),this._errorElement.textContent="",this._errorElement.classList.remove(this._settings.errorClass),e.classList.remove(this._settings.inputErrorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._settings.inputSelector)),this._submitButton=this._form.querySelector(this._settings.submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}enableValidation(){this._setEventListeners()}}class s{constructor(e){this._popup=e}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"==e.key&&this.close()};setEventListeners(){this._popup.addEventListener("click",(e=>{e.target==this._popup.querySelector(".modal__close-button-image")&&this.close()})),this._popup.addEventListener("mousedown",(e=>{e.target===this._popup&&this.close()}))}}class i extends s{constructor(e,t){super(e),this._submitFunction=t,this._form=this._popup.querySelector(".modal__form")}_getInputValues(){this._inputValues={},this._form.querySelectorAll(".modal__input").forEach((e=>{this._inputValues[e.name]=e.value}))}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._getInputValues(),e.target.reset(),this._submitFunction(this._inputValues)}))}}const r=[{text:"Lago di Braies",image:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"},{text:"Vanoise National Park",image:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{text:"Latemar",image:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{text:"Bald Mountains",image:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{text:"Lake Louise",image:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{text:"Yosemite Valley",image:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"}],n={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit",inactiveButtonClass:"modal__submit_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},o=new class extends s{constructor(e){super(e)}open(e,t){this._cardImage=this._popup.querySelector(".modal__card-image"),this._cardImage.src=t,this._cardImage.alt=e,this._popup.querySelector(".modal__card-image-description").textContent=e,super.open()}}(document.querySelector(".modal_modal-type_card-image"));o.setEventListeners();const a=document.querySelector(".cards");function c(e,t){o.open(e,t)}function l(t){return new e(t,"cardTemplate",c).generateCard()}const _=new class{constructor(e,t){let{items:s,renderer:i}=e;this._initialItems=s,this._renderer=i,this._itemContainer=t}renderItems(){this._initialItems.forEach((e=>{this.addItem(e)}))}addItem(e){this._renderer(e,this._itemContainer)}}({items:function(){const e=[];return r.forEach((t=>{const s=l(t);e.push(s)})),e}(),renderer:function(e,t){t.prepend(e)}},a);_.renderItems();const d=document.querySelector(".profile"),u=d.querySelector(".profile__name"),m=d.querySelector(".profile__description"),h=new class{constructor(e){let{name:t,description:s}=e;this._name=t,this._description=s}getUserInfo(){const e={};return e.name=this._name.textContent,e.description=this._description.textContent,e}setUserInfo(e){let{name:t,description:s}=e;this._name.textContent=t,this._description.textContent=s}}({name:u,description:m}),p=new i(document.querySelector(".modal_modal-type_profile-edit"),(function(e){h.setUserInfo(e),p.close()}));p.setEventListeners();const g=new t(n,document.forms["profile-edit__form"]);g.enableValidation();const f=p._popup.querySelector(".modal__input_name"),E=p._popup.querySelector(".modal__input_description");d.querySelector(".profile__edit").addEventListener("click",(function(e){p.open();const t=h.getUserInfo();f.value=t.name,E.value=t.description,g.resetValidation()}));const v=new t(n,document.querySelector("#add-card__form"));v.enableValidation();const y=new i(document.querySelector(".modal_modal-type_card-adder"),(function(e){const t=l({text:e.title,image:e.link});_.addItem(t),y.close(),v.resetValidation()}));y.setEventListeners(),d.querySelector(".profile__add").addEventListener("click",(e=>{y.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQU8sTUFBTUEsRUFDWEMsV0FBQUEsQ0FBWUMsRUFBTUMsRUFBY0MsR0FDOUJDLEtBQUtDLE1BQVFKLEVBQUtLLEtBQ2xCRixLQUFLRyxPQUFTTixFQUFLTyxNQUNuQkosS0FBS0ssY0FBZ0JQLEVBQ3JCRSxLQUFLTSxrQkFBb0JQLENBQzNCLENBRUFRLGdCQUFBQSxHQUtFLE9BSnFCQyxTQUNsQkMsY0FBYyxJQUFJVCxLQUFLSyxpQkFDdkJLLFFBQVFELGNBQWMsU0FDdEJFLFdBQVUsRUFFZixDQUVBQyxrQkFBQUEsR0FDRVosS0FBS2EsY0FBZ0JiLEtBQUtjLFNBQVNMLGNBQWMsZ0JBRWpEVCxLQUFLYSxjQUFjRSxpQkFBaUIsU0FBUyxLQUMzQ2YsS0FBS00sa0JBQWtCTixLQUFLQyxNQUFPRCxLQUFLRyxPQUFPLElBRWpESCxLQUFLZ0IscUJBQ0xoQixLQUFLaUIsc0JBQ1AsQ0FFQUQsa0JBQUFBLEdBQ0VoQixLQUFLa0IsV0FBYWxCLEtBQUtjLFNBQVNMLGNBQWMsZ0JBQzlDVCxLQUFLa0IsV0FBV0gsaUJBQWlCLFNBQVMsS0FDeENmLEtBQUtrQixXQUFXQyxVQUFVQyxPQUFPLG9CQUFvQixHQUV6RCxDQUVBSCxvQkFBQUEsR0FDRWpCLEtBQUtxQixZQUFjckIsS0FBS2MsU0FBU0wsY0FBYyxpQkFDL0NULEtBQUtxQixZQUFZTixpQkFBaUIsU0FBUyxLQUN6Q2YsS0FBS2MsU0FBU1EsUUFBUSxHQUUxQixDQUVBQyxZQUFBQSxHQU1FLE9BTEF2QixLQUFLYyxTQUFXZCxLQUFLTyxtQkFDckJQLEtBQUtZLHFCQUNMWixLQUFLYyxTQUFTTCxjQUFjLGVBQWVlLFlBQWN4QixLQUFLQyxNQUM5REQsS0FBS2EsY0FBY1ksSUFBTXpCLEtBQUtHLE9BQzlCSCxLQUFLYSxjQUFjYSxJQUFNMUIsS0FBS0MsTUFDdkJELEtBQUtjLFFBQ2QsRUMvQ0ssTUFBTWEsRUFDWC9CLFdBQUFBLENBQVlnQyxFQUFVQyxHQUNwQjdCLEtBQUs4QixVQUFZRixFQUNqQjVCLEtBQUsrQixNQUFRRixDQUNmLENBRUFHLGdCQUFBQSxHQUNFLE9BQU9oQyxLQUFLaUMsV0FBV0MsTUFBTUMsSUFDbkJBLEVBQWFDLFNBQVNDLE9BRWxDLENBRUFDLGtCQUFBQSxHQUNNdEMsS0FBS2dDLG9CQUNQaEMsS0FBS3VDLGNBQWNwQixVQUFVcUIsSUFBSXhDLEtBQUs4QixVQUFVVyxxQkFDaER6QyxLQUFLdUMsY0FBY0csVUFBVyxJQUU5QjFDLEtBQUt1QyxjQUFjcEIsVUFBVUcsT0FBT3RCLEtBQUs4QixVQUFVVyxxQkFDbkR6QyxLQUFLdUMsY0FBY0csVUFBVyxFQUVsQyxDQUVBQyxlQUFBQSxDQUFnQkMsR0FDZDVDLEtBQUs2QyxjQUFnQjdDLEtBQUsrQixNQUFNdEIsY0FBYyxJQUFJbUMsRUFBTUUsWUFDeEQ5QyxLQUFLNkMsY0FBY3JCLFlBQWNvQixFQUFNRyxrQkFDdkMvQyxLQUFLNkMsY0FBYzFCLFVBQVVxQixJQUFJeEMsS0FBSzhCLFVBQVVrQixZQUNoREosRUFBTXpCLFVBQVVxQixJQUFJeEMsS0FBSzhCLFVBQVVtQixnQkFDckMsQ0FDQUMsZUFBQUEsQ0FBZ0JOLEdBQ2Q1QyxLQUFLNkMsY0FBZ0I3QyxLQUFLK0IsTUFBTXRCLGNBQWMsSUFBSW1DLEVBQU1FLFlBQ3hEOUMsS0FBSzZDLGNBQWNyQixZQUFjLEdBQ2pDeEIsS0FBSzZDLGNBQWMxQixVQUFVRyxPQUFPdEIsS0FBSzhCLFVBQVVrQixZQUNuREosRUFBTXpCLFVBQVVHLE9BQU90QixLQUFLOEIsVUFBVW1CLGdCQUN4QyxDQUVBRSxtQkFBQUEsQ0FBb0JQLEdBQ2JBLEVBQU1SLFNBQVNDLE1BR2xCckMsS0FBS2tELGdCQUFnQk4sR0FGckI1QyxLQUFLMkMsZ0JBQWdCQyxFQUl6QixDQUVBaEMsa0JBQUFBLEdBQ0VaLEtBQUtpQyxXQUFhbUIsTUFBTUMsS0FDdEJyRCxLQUFLK0IsTUFBTXVCLGlCQUFpQnRELEtBQUs4QixVQUFVeUIsZ0JBRTdDdkQsS0FBS3VDLGNBQWdCdkMsS0FBSytCLE1BQU10QixjQUM5QlQsS0FBSzhCLFVBQVUwQixzQkFFakJ4RCxLQUFLc0MscUJBQ0x0QyxLQUFLaUMsV0FBV3dCLFNBQVNiLElBQ3ZCQSxFQUFNN0IsaUJBQWlCLFNBQVMsS0FDOUJmLEtBQUttRCxvQkFBb0JQLEdBQ3pCNUMsS0FBS3NDLG9CQUFvQixHQUN6QixHQUVOLENBRUFvQixlQUFBQSxHQUNFMUQsS0FBS3NDLHFCQUNMdEMsS0FBS2lDLFdBQVd3QixTQUFTYixJQUN2QjVDLEtBQUtrRCxnQkFBZ0JOLEVBQU0sR0FFL0IsQ0FFQWUsZ0JBQUFBLEdBQ0UzRCxLQUFLWSxvQkFDUCxFQ3BFYSxNQUFNZ0QsRUFDbkJoRSxXQUFBQSxDQUFZaUUsR0FDVjdELEtBQUs4RCxPQUFTRCxDQUNoQixDQUVBRSxJQUFBQSxHQUNFL0QsS0FBSzhELE9BQU8zQyxVQUFVcUIsSUFBSSxnQkFDMUJoQyxTQUFTTyxpQkFBaUIsVUFBV2YsS0FBS2dFLGdCQUM1QyxDQUNBQyxLQUFBQSxHQUNFakUsS0FBSzhELE9BQU8zQyxVQUFVRyxPQUFPLGdCQUM3QmQsU0FBUzBELG9CQUFvQixVQUFXbEUsS0FBS2dFLGdCQUMvQyxDQUNBQSxnQkFBbUJHLElBQ0YsVUFBWEEsRUFBSUMsS0FDTnBFLEtBQUtpRSxPQUNQLEVBRUZJLGlCQUFBQSxHQUNFckUsS0FBSzhELE9BQU8vQyxpQkFBaUIsU0FBVW9ELElBRW5DQSxFQUFJRyxRQUFVdEUsS0FBSzhELE9BQU9yRCxjQUFjLCtCQUV4Q1QsS0FBS2lFLE9BQ1AsSUFFRmpFLEtBQUs4RCxPQUFPL0MsaUJBQWlCLGFBQWNvRCxJQUNyQ0EsRUFBSUcsU0FBV3RFLEtBQUs4RCxRQUN0QjlELEtBQUtpRSxPQUNQLEdBRUosRUM5QmEsTUFBTU0sVUFBc0JYLEVBQ3pDaEUsV0FBQUEsQ0FBWWlFLEVBQU9XLEdBQ2pCQyxNQUFNWixHQUNON0QsS0FBSzBFLGdCQUFrQkYsRUFDdkJ4RSxLQUFLK0IsTUFBUS9CLEtBQUs4RCxPQUFPckQsY0FBYyxlQUN6QyxDQUNBa0UsZUFBQUEsR0FDRTNFLEtBQUs0RSxhQUFlLENBQUMsRUFDckI1RSxLQUFLK0IsTUFBTXVCLGlCQUFpQixpQkFBaUJHLFNBQVNiLElBQ3BENUMsS0FBSzRFLGFBQWFoQyxFQUFNaUMsTUFBUWpDLEVBQU1rQyxLQUFLLEdBRS9DLENBRUFULGlCQUFBQSxHQUNFSSxNQUFNSixvQkFDTnJFLEtBQUsrQixNQUFNaEIsaUJBQWlCLFVBQVdvRCxJQUNyQ0EsRUFBSVksaUJBQ0ovRSxLQUFLMkUsa0JBQ0xSLEVBQUlHLE9BQU9VLFFBQ1hoRixLQUFLMEUsZ0JBQWdCMUUsS0FBSzRFLGFBQWEsR0FFM0MsRUN0QkssTUFBTUssRUFBZSxDQUMxQixDQUNFL0UsS0FBTSxpQkFDTkUsTUFDRSxrR0FFSixDQUNFRixLQUFNLHdCQUNORSxNQUNFLHFHQUVKLENBQ0VGLEtBQU0sVUFDTkUsTUFDRSxxR0FFSixDQUNFRixLQUFNLGlCQUNORSxNQUNFLDRHQUVKLENBQ0VGLEtBQU0sY0FDTkUsTUFDRSx5R0FFSixDQUNFRixLQUFNLGtCQUNORSxNQUNFLHVHQUlPOEUsRUFBZSxDQUMxQkMsYUFBYyxlQUNkNUIsY0FBZSxnQkFDZkMscUJBQXNCLGlCQUN0QmYsb0JBQXFCLHlCQUNyQlEsZ0JBQWlCLDBCQUNqQkQsV0FBWSx3QkM5QlJvQyxFQUFpQixJQ1JSLGNBQTZCeEIsRUFDMUNoRSxXQUFBQSxDQUFZaUUsR0FDVlksTUFBTVosRUFDUixDQUVBRSxJQUFBQSxDQUFLc0IsRUFBU0MsR0FDWnRGLEtBQUt1RixXQUFhdkYsS0FBSzhELE9BQU9yRCxjQUFjLHNCQUM1Q1QsS0FBS3VGLFdBQVc5RCxJQUFNNkQsRUFDdEJ0RixLQUFLdUYsV0FBVzdELElBQU0yRCxFQUN0QnJGLEtBQUs4RCxPQUFPckQsY0FBYyxrQ0FBa0NlLFlBQzFENkQsRUFDRlosTUFBTVYsTUFDUixHREhBdkQsU0FBU0MsY0FBYyxpQ0FFekIyRSxFQUFlZixvQkFDZixNQUFNbUIsRUFBbUJoRixTQUFTQyxjQUFjLFVBRWhELFNBQVNnRixFQUFjQyxFQUFVQyxHQUMvQlAsRUFBZXJCLEtBQUsyQixFQUFVQyxFQUNoQyxDQUVBLFNBQVNDLEVBQVdDLEdBRWxCLE9BRGEsSUFBSWxHLEVBQUtrRyxFQUFVLGVBQWdCSixHQUNwQ2xFLGNBQ2QsQ0FlQSxNQUFNdUUsRUFBVyxJRXJDRixNQUNibEcsV0FBQUEsQ0FBV21HLEVBQXNCQyxHQUFlLElBQXBDLE1BQUVDLEVBQUssU0FBRUMsR0FBVUgsRUFDN0IvRixLQUFLbUcsY0FBZ0JGLEVBQ3JCakcsS0FBS29HLFVBQVlGLEVBQ2pCbEcsS0FBS3FHLGVBQWlCTCxDQUN4QixDQUVBTSxXQUFBQSxHQUNFdEcsS0FBS21HLGNBQWMxQyxTQUFTOEMsSUFDMUJ2RyxLQUFLd0csUUFBUUQsRUFBSyxHQUV0QixDQUNBQyxPQUFBQSxDQUFRQyxHQUNOekcsS0FBS29HLFVBQVVLLEVBQVN6RyxLQUFLcUcsZUFDL0IsR0Z3QkEsQ0FDRUosTUFmSixXQUNFLE1BQU1TLEVBQVEsR0FLZCxPQUpBekIsRUFBYXhCLFNBQVM4QyxJQUNwQixNQUFNSSxFQUFjZixFQUFXVyxHQUMvQkcsRUFBTUUsS0FBS0QsRUFBWSxJQUVsQkQsQ0FDVCxDQVFXRyxHQUNQWCxTQVBKLFNBQXFCTyxFQUFTSyxHQUM1QkEsRUFBWUMsUUFBUU4sRUFDdEIsR0FPRWpCLEdBRUZNLEVBQVNRLGNBSVQsTUFBTVUsRUFBVXhHLFNBQVNDLGNBQWMsWUFDakN3RyxFQUFjRCxFQUFRdkcsY0FBYyxrQkFDcEN5RyxFQUFxQkYsRUFBUXZHLGNBQWMseUJBRTNDMEcsRUFBYyxJR3BETCxNQUNidkgsV0FBQUEsQ0FBV21HLEdBQXdCLElBQXZCLEtBQUVsQixFQUFJLFlBQUV1QyxHQUFhckIsRUFDL0IvRixLQUFLcUgsTUFBUXhDLEVBQ2I3RSxLQUFLc0gsYUFBZUYsQ0FDdEIsQ0FDQUcsV0FBQUEsR0FDRSxNQUFNQyxFQUFPLENBQUMsRUFHZCxPQUZBQSxFQUFLM0MsS0FBTzdFLEtBQUtxSCxNQUFNN0YsWUFDdkJnRyxFQUFLSixZQUFjcEgsS0FBS3NILGFBQWE5RixZQUM5QmdHLENBQ1QsQ0FDQUMsV0FBQUEsQ0FBV0MsR0FBd0IsSUFBdkIsS0FBRTdDLEVBQUksWUFBRXVDLEdBQWFNLEVBQy9CMUgsS0FBS3FILE1BQU03RixZQUFjcUQsRUFDekI3RSxLQUFLc0gsYUFBYTlGLFlBQWM0RixDQUNsQyxHSHNDK0IsQ0FDL0J2QyxLQUFNb0MsRUFDTkcsWUFBYUYsSUFRVFMsRUFBbUIsSUFBSXBELEVBQzNCL0QsU0FBU0MsY0FBYyxtQ0FOekIsU0FBaUNtSCxHQUMvQlQsRUFBWU0sWUFBWUcsR0FDeEJELEVBQWlCMUQsT0FDbkIsSUFPQTBELEVBQWlCdEQsb0JBQ2pCLE1BQU13RCxFQUE0QixJQUFJbEcsRUFDcEN1RCxFQUNBMUUsU0FBU3NILE1BQU0sdUJBRWpCRCxFQUEwQmxFLG1CQUUxQixNQUFNb0UsRUFDSkosRUFBaUI3RCxPQUFPckQsY0FBYyxzQkFDbEN1SCxFQUEwQkwsRUFBaUI3RCxPQUFPckQsY0FDdEQsNkJBR0Z1RyxFQUNHdkcsY0FBYyxrQkFDZE0saUJBQWlCLFNBQVMsU0FBVWtILEdBQ25DTixFQUFpQjVELE9BQ2pCLE1BQU15RCxFQUFPTCxFQUFZSSxjQUN6QlEsRUFBaUJqRCxNQUFRMEMsRUFBSzNDLEtBQzlCbUQsRUFBd0JsRCxNQUFRMEMsRUFBS0osWUFDckNTLEVBQTBCbkUsaUJBQzVCLElBR0YsTUFDTXdFLEVBQTBCLElBQUl2RyxFQUFjdUQsRUFENUIxRSxTQUFTQyxjQUFjLG9CQUU3Q3lILEVBQXdCdkUsbUJBWXhCLE1BQU13RSxFQUFpQixJQUFJNUQsRUFDekIvRCxTQUFTQyxjQUFjLGlDQVh6QixTQUFtQ21ILEdBQ2pDLE1BQU1RLEVBQVV4QyxFQUFXLENBQ3pCMUYsS0FBTTBILEVBQVlTLE1BQ2xCakksTUFBT3dILEVBQVlVLE9BRXJCeEMsRUFBU1UsUUFBUTRCLEdBQ2pCRCxFQUFlbEUsUUFDZmlFLEVBQXdCeEUsaUJBQzFCLElBTUF5RSxFQUFlOUQsb0JBRWYyQyxFQUFRdkcsY0FBYyxpQkFBaUJNLGlCQUFpQixTQUFVa0gsSUFDaEVFLEVBQWVwRSxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZXRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmV0cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25ldHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmV0cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25ldHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmV0cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25ldHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xyXG4gICAgdGhpcy5fdGV4dCA9IGRhdGEudGV4dDtcclxuICAgIHRoaXMuX2ltYWdlID0gZGF0YS5pbWFnZTtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2dldENhcmRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKGAjJHt0aGlzLl9jYXJkU2VsZWN0b3J9YClcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZFRlbXBsYXRlO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX3RleHQsIHRoaXMuX2ltYWdlKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbkhhbmRsZXIoKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbkhhbmRsZXIoKTtcclxuICB9XHJcblxyXG4gIF9saWtlQnV0dG9uSGFuZGxlcigpIHtcclxuICAgIHRoaXMuX2NhcmRIZWFydCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19oZWFydFwiKTtcclxuICAgIHRoaXMuX2NhcmRIZWFydC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9jYXJkSGVhcnQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2hlYXJ0X2xpa2VkXCIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfZGVsZXRlQnV0dG9uSGFuZGxlcigpIHtcclxuICAgIHRoaXMuX2NhcmREZWxldGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlXCIpO1xyXG4gICAgdGhpcy5fY2FyZERlbGV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0Q2FyZFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RleHRcIikudGV4dENvbnRlbnQgPSB0aGlzLl90ZXh0O1xyXG4gICAgdGhpcy5fZWxlbWVudEltYWdlLnNyYyA9IHRoaXMuX2ltYWdlO1xyXG4gICAgdGhpcy5fZWxlbWVudEltYWdlLmFsdCA9IHRoaXMuX3RleHQ7XHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dCkge1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgfVxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dCkge1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcclxuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBwb3B1cDtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZXZ0LnRhcmdldCA9PSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idXR0b24taW1hZ2VcIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gdGhpcy5fcG9wdXApIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cCwgc3VibWl0RnVuY3Rpb24pIHtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICAgIHRoaXMuX3N1Ym1pdEZ1bmN0aW9uID0gc3VibWl0RnVuY3Rpb247XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICB9XHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5faW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIikuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5faW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2dldElucHV0VmFsdWVzKCk7XHJcbiAgICAgIGV2dC50YXJnZXQucmVzZXQoKTtcclxuICAgICAgdGhpcy5fc3VibWl0RnVuY3Rpb24odGhpcy5faW5wdXRWYWx1ZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgdGV4dDogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgaW1hZ2U6XHJcbiAgICAgIFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGV4dDogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGltYWdlOlxyXG4gICAgICBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHRleHQ6IFwiTGF0ZW1hclwiLFxyXG4gICAgaW1hZ2U6XHJcbiAgICAgIFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGV4dDogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgaW1hZ2U6XHJcbiAgICAgIFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHRleHQ6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGltYWdlOlxyXG4gICAgICBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICB0ZXh0OiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgaW1hZ2U6XHJcbiAgICAgIFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1TZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXRcIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXRfZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbiIsImltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZXRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25ldHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZXRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25ldHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmV0cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZXRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgZm9ybVNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuY29uc3QgY2FyZEltYWdlTW9kYWwgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9tb2RhbC10eXBlX2NhcmQtaW1hZ2VcIilcclxuKTtcclxuY2FyZEltYWdlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY29uc3QgY2FyZExpc3RMb2NhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNcIik7XHJcblxyXG5mdW5jdGlvbiBvcGVuQ2FyZE1vZGFsKGNhcmRUZXh0LCBjYXJkU3JjKSB7XHJcbiAgY2FyZEltYWdlTW9kYWwub3BlbihjYXJkVGV4dCwgY2FyZFNyYyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiY2FyZFRlbXBsYXRlXCIsIG9wZW5DYXJkTW9kYWwpO1xyXG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgY29uc3QgY2FyZHMgPSBbXTtcclxuICBpbml0aWFsQ2FyZHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xyXG4gICAgY2FyZHMucHVzaChjYXJkRWxlbWVudCk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIGNhcmRzO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJDYXJkcyhlbGVtZW50LCBlbGVtZW50TGlzdCkge1xyXG4gIGVsZW1lbnRMaXN0LnByZXBlbmQoZWxlbWVudCk7XHJcbn1cclxuXHJcbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGdldEluaXRpYWxDYXJkcygpLFxyXG4gICAgcmVuZGVyZXI6IHJlbmRlckNhcmRzLFxyXG4gIH0sXHJcbiAgY2FyZExpc3RMb2NhdGlvblxyXG4pO1xyXG5jYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8gUHJvZmlsZSBFZGl0IEZvcm1cclxuXHJcbmNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVcIik7XHJcbmNvbnN0IHByb2ZpbGVOYW1lID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVEZWNzcmlwdGlvbiA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lOiBwcm9maWxlTmFtZSxcclxuICBkZXNjcmlwdGlvbjogcHJvZmlsZURlY3NyaXB0aW9uLFxyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbiAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMpO1xyXG4gIHByb2ZpbGVFZGl0TW9kYWwuY2xvc2UoKTtcclxufVxyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfbW9kYWwtdHlwZV9wcm9maWxlLWVkaXRcIiksXHJcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcclxuKTtcclxuXHJcbnByb2ZpbGVFZGl0TW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuY29uc3QgcHJvZmlsZUVkaXRGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGZvcm1TZXR0aW5ncyxcclxuICBkb2N1bWVudC5mb3Jtc1tcInByb2ZpbGUtZWRpdF9fZm9ybVwiXVxyXG4pO1xyXG5wcm9maWxlRWRpdEZvcm1WYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVNb2RhbE5hbWUgPVxyXG4gIHByb2ZpbGVFZGl0TW9kYWwuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X25hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVNb2RhbERlc2NyaXB0aW9uID0gcHJvZmlsZUVkaXRNb2RhbC5fcG9wdXAucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9faW5wdXRfZGVzY3JpcHRpb25cIlxyXG4pO1xyXG5cclxucHJvZmlsZVxyXG4gIC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXRcIilcclxuICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgcHJvZmlsZUVkaXRNb2RhbC5vcGVuKCk7XHJcbiAgICBjb25zdCBpbmZvID0gcHJvZmlsZUluZm8uZ2V0VXNlckluZm8oKTtcclxuICAgIHByb2ZpbGVNb2RhbE5hbWUudmFsdWUgPSBpbmZvLm5hbWU7XHJcbiAgICBwcm9maWxlTW9kYWxEZXNjcmlwdGlvbi52YWx1ZSA9IGluZm8uZGVzY3JpcHRpb247XHJcbiAgICBwcm9maWxlRWRpdEZvcm1WYWxpZGF0aW9uLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIH0pO1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBDYXJkIEFkZGVyIEZvcm1cclxuY29uc3QgY2FyZEFkZGVyRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmRfX2Zvcm1cIik7XHJcbmNvbnN0IGNhcmRBZGRlckZvcm1WYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNldHRpbmdzLCBjYXJkQWRkZXJGb3JtKTtcclxuY2FyZEFkZGVyRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZEFkZGVyRm9ybVN1Ym1pdChpbnB1dFZhbHVlcykge1xyXG4gIGNvbnN0IG5ld0NhcmQgPSBjcmVhdGVDYXJkKHtcclxuICAgIHRleHQ6IGlucHV0VmFsdWVzLnRpdGxlLFxyXG4gICAgaW1hZ2U6IGlucHV0VmFsdWVzLmxpbmssXHJcbiAgfSk7XHJcbiAgY2FyZExpc3QuYWRkSXRlbShuZXdDYXJkKTtcclxuICBjYXJkQWRkZXJNb2RhbC5jbG9zZSgpO1xyXG4gIGNhcmRBZGRlckZvcm1WYWxpZGF0aW9uLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59XHJcblxyXG5jb25zdCBjYXJkQWRkZXJNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfbW9kYWwtdHlwZV9jYXJkLWFkZGVyXCIpLFxyXG4gIGhhbmRsZUNhcmRBZGRlckZvcm1TdWJtaXRcclxuKTtcclxuY2FyZEFkZGVyTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbnByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGRcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gIGNhcmRBZGRlck1vZGFsLm9wZW4oKTtcclxufSk7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gIH1cclxuXHJcbiAgb3BlbihpbWdUZXh0LCBpbWdTcmMpIHtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcmQtaW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gaW1nU3JjO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IGltZ1RleHQ7XHJcbiAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXJkLWltYWdlLWRlc2NyaXB0aW9uXCIpLnRleHRDb250ZW50ID1cclxuICAgICAgaW1nVGV4dDtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgaXRlbUNvbnRhaW5lcikge1xyXG4gICAgdGhpcy5faW5pdGlhbEl0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5faXRlbUNvbnRhaW5lciA9IGl0ZW1Db250YWluZXI7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2luaXRpYWxJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuYWRkSXRlbShpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyKGVsZW1lbnQsIHRoaXMuX2l0ZW1Db250YWluZXIpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgaW5mbyA9IHt9O1xyXG4gICAgaW5mby5uYW1lID0gdGhpcy5fbmFtZS50ZXh0Q29udGVudDtcclxuICAgIGluZm8uZGVzY3JpcHRpb24gPSB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcclxuICAgIHJldHVybiBpbmZvO1xyXG4gIH1cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIl90ZXh0IiwidGV4dCIsIl9pbWFnZSIsImltYWdlIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2dldENhcmRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfZWxlbWVudEltYWdlIiwiX2VsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2xpa2VCdXR0b25IYW5kbGVyIiwiX2RlbGV0ZUJ1dHRvbkhhbmRsZXIiLCJfY2FyZEhlYXJ0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2NhcmREZWxldGUiLCJyZW1vdmUiLCJnZW5lcmF0ZUNhcmQiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm0iLCJfc2V0dGluZ3MiLCJfZm9ybSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRMaXN0Iiwic29tZSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfc3VibWl0QnV0dG9uIiwiYWRkIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXQiLCJfZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImZvckVhY2giLCJyZXNldFZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwiUG9wdXAiLCJwb3B1cCIsIl9wb3B1cCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGdW5jdGlvbiIsInN1cGVyIiwiX3N1Ym1pdEZ1bmN0aW9uIiwiX2dldElucHV0VmFsdWVzIiwiX2lucHV0VmFsdWVzIiwibmFtZSIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJyZXNldCIsImluaXRpYWxDYXJkcyIsImZvcm1TZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImNhcmRJbWFnZU1vZGFsIiwiaW1nVGV4dCIsImltZ1NyYyIsIl9jYXJkSW1hZ2UiLCJjYXJkTGlzdExvY2F0aW9uIiwib3BlbkNhcmRNb2RhbCIsImNhcmRUZXh0IiwiY2FyZFNyYyIsImNyZWF0ZUNhcmQiLCJjYXJkRGF0YSIsImNhcmRMaXN0IiwiX3JlZiIsIml0ZW1Db250YWluZXIiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2luaXRpYWxJdGVtcyIsIl9yZW5kZXJlciIsIl9pdGVtQ29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJjYXJkcyIsImNhcmRFbGVtZW50IiwicHVzaCIsImdldEluaXRpYWxDYXJkcyIsImVsZW1lbnRMaXN0IiwicHJlcGVuZCIsInByb2ZpbGUiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZWNzcmlwdGlvbiIsInByb2ZpbGVJbmZvIiwiZGVzY3JpcHRpb24iLCJfbmFtZSIsIl9kZXNjcmlwdGlvbiIsImdldFVzZXJJbmZvIiwiaW5mbyIsInNldFVzZXJJbmZvIiwiX3JlZjIiLCJwcm9maWxlRWRpdE1vZGFsIiwiaW5wdXRWYWx1ZXMiLCJwcm9maWxlRWRpdEZvcm1WYWxpZGF0aW9uIiwiZm9ybXMiLCJwcm9maWxlTW9kYWxOYW1lIiwicHJvZmlsZU1vZGFsRGVzY3JpcHRpb24iLCJldmVudCIsImNhcmRBZGRlckZvcm1WYWxpZGF0aW9uIiwiY2FyZEFkZGVyTW9kYWwiLCJuZXdDYXJkIiwidGl0bGUiLCJsaW5rIl0sInNvdXJjZVJvb3QiOiIifQ==